<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Compras</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">

</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.js"></script>

    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/plentz/jquery-maskmoney@master/dist/jquery.maskMoney.min.js"></script>

    <script src="https://unpkg.com/imask"></script>
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper">
                <a href="#" class="brand-logo">Smart List</a>
                <ul id="nav-mobile" class="right hide-on-med-and-down">
                    <li><a href="#lista_compras"></a></li>
                    <!-- Adicione mais links conforme necessário -->
                </ul>
            </div>
        </nav>
    </div>

    </div>
    <div class="" id="lista-compras"></div>

    <footer class="page-footer  lighten">




        <hr>
        <div class="right-align">
            <button class="modal-trigger btn waves-effect waves-light btn-floating right" data-target="modal1"
                id="bt-add"> <i class="material-icons">add</i></button>
        </div>
        <div class="row-">
            <div class="red-text">Total:<span id="total-real"> 0.00</span></div>
            <!--<h6 class="white-text">Total Estimado: R$ <span id="total-estimado">0.00</span>--> </h6>
        </div>
        </div>
        <input type="text" id="currency" />
    </footer>

    <!-- Modal Bottom Sheet -->
    <div id="modal1" class="modal bottom-sheet">
        <div class="modal-content modal-content-rodape">
            <div class="row">
                <form class="col s12">
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="new-item" type="text" class="validate">
                            <label for="new-item">Item</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s6">
                            <input id="new-price"  class="validate currency">
                            <label for="new-price">Preço</label>
                        </div>
                        <div class="input-field col s3">
                            <input id="new-quantity" type="number" value="1" class="validate">
                            <label for="new-quatity">Qtd</label>
                        </div>
                        <div class="input-field col s3">
                            <select id="new-unity" class="">
                                <option value="" disabled selected></option>
                                <option value="kg">Kg</option>
                                <option value="Lt">Litro(s)</option>
                                <option value="Un">Unidade</option>
                                <option value="dz">Duzinho</option>
                                <option value="Pq">Pacote</option>
                            </select>
                            <label for="new-unity">Unidade</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
     
                <a href="#!" class="modal-close waves-effect waves-red btn-floating btn-small warning"
                    onclick="closeModal()"><i class="material-icons">cancel</i></a>
                <a href="#!" class="modal-close waves-effect waves-green btn-floating btn-small green"
                    onclick="adicionarItemModal()" data-target="modal1"><i class="material-icons">add</i></a>
            </div>
        </div>
    </div>

    <script>
          document.addEventListener('DOMContentLoaded', function () {
            M.AutoInit();
            var options = {};
            var modal = document.querySelector('.modal');
            var trigger = document.querySelector('.modal-trigger');

            if (!modal || !trigger) {
                console.error('Modal ou trigger não encontrado!');
                return;
            }
            var instance = M.Modal.init(modal, {
                onCloseEnd: function () {
                    // Limpar os campos do formulário quando o modal é fechado
                    formClear();
                }
            });
            trigger.addEventListener('click', function () {
                instance.open();
            });
        });

        function formClear() {
            document.querySelectorAll('.modal form input').forEach(function (input) {
                input.value = '';
            });
        }


        $(function () {
            $(".currency").maskMoney({
                prefix: 'R$ ',
                thousands: '.',
                decimal: ','
            });
            $(".currency").maskMoney('mask');
        });
        document.addEventListener('DOMContentLoaded', function () {
        var options = {}; // Defina as opções aqui se você quiser usá-las
     try {
       var elems = document.querySelectorAll('select');
       console.log('Select elements found:', elems.length);
       var instances = M.FormSelect.init(elems, options);
       console.log('FormSelect initialized successfully');
   } catch (error) {
      console.error('Error initializing FormSelect:', error);
      }
  });
     atualizarLista();
</script>

</body>

</html>